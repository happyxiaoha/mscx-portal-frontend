<div class="ns-contentComponent">
    <div class="ns-content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <ol class="breadcrumb">
                        <li><a href="api.html">交易广场</a></li>
                        <li><a href="api.html">API</a></li>
                        <li class="active"><%= data.result && data.result.apiServiceCName %></li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
            <div class="col-md-9">
                <div class="ns-apiDetailComponent">
                    <div class="ns-apiDetailTop">
                        <div class="media">
                            <div class="media-left">
                                <div class="media-object">
                                    <img src="<%= data.result && data.result.iconUrl %>" alt="API icon">
                                </div>
                            </div>
                            <div class="media-body">
                                <!-- JiaThis Button END -->
                                <h4 class="media-heading"><%= data.result && data.result.apiServiceCName %>
                                    <div class="tags">
                                        <% data.result && data.result.tagsName && data.result.tagsName.split(',').forEach(function(item){ %>
                                        <span class="tagItem"><%= item %></span>
                                        <% }) %>
                                    </div>
                                </h4>
                                <div class="subInfo">
                                    <%= data.result && data.result.description %>
                                </div>
                                <div class="baseInfo">
                                    <div class="top">
                                        <div class="media">
                                            <div class="media-body">
                                                <div class="info">
                                                    <div class="cell">
                                                        收费类型：<span class="text-large text-orange"><%= data.result && data.result.chargeTypeDesc %></span>
                                                    </div>
                                                    <div class="cell">服务区域：<span><%= data.result && data.result.scope %></span>
                                                    </div>
                                                </div>
                                                <!-- <div class="info"> -->
                                                    <!-- div class="cell">API状态：<span><%= data.result && data.result.statusDesc %></span></div> -->
                                                    
                                                <!-- </div> -->
                                                <div class="info">
                                                    <div class="cell">
                                                        服务商：<span><%= data.result && data.result.providerName %></span>
                                                    </div>
                                                    <div class="cell">
                                                        更新时间：<span><%= data.result && data.result.updatedTime && (new Date(data.result.updatedTime).toISOString()).slice(0,10)%></span>
                                                    </div>
                                                </div>

                                                <div class="info">
                                                    <div class="cell">
                                                        综合评分：<span><%= data.result.avgScore %>分</span>
                                                        <div class="rating hide">
                                                            <span data-index="0" class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                                            <span data-index="1" class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                                            <span data-index="2" class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                                            <span data-index="3" class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                                            <span data-index="4" class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="media-right">
                                                <div class="rightInfo">
                                                    <!-- <p>综合分：<span>4.2</span></p> -->
                                                    <p>申请量：<span><%= data.result && data.result.applyCnt %></span></p>
                                                    <p>浏览量：<span><%= data.result && data.result.viewCnt %></span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bottom">
                                        <div class="share">
                                            
                                        </div>
                                    </div>
                                </div>
                                <%if(data.result.status == '0'){%>
                                <div class="submitBtns">
                                    <button type="button" id="applyBtn" class="btn" data-toggle="modal" data-target="#myModal">申请</button>
                                    <% if(data.result && !data.result.attentionFlag){ %>
                                    <button type="button" id="followBtn" class="btn" data-toggle="modal" data-target="#myModal">关注</button>
                                    <% }else{ %>
                                    <button type="button" id="followBtn" class="btn" data-toggle="modal" data-target="#myModal">取消关注</button>
                                    <% } %>
                                    <button id="offlineBtn" class="btn btn-active">线下洽谈申请</button>
                                </div>
                                <%}%>
                            </div>
                        </div>

                    </div>
                    <div class="ns-apiDetailBottom">
                        <div class="tabs">
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active"><a href="javascript:;" role="tab" data-toggle="tab" data-index="0">API调用</a>
                                </li>
                                <li role="presentation"><a href="javascript:;" role="tab" data-toggle="tab" data-index="1">返回码</a></li>
                                <li role="presentation"><a href="javascript:;" role="tab" data-toggle="tab" data-index="2">套餐</a>
                                </li>
                            </ul>
                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="home">
                                    <div class="container-fluid">
                                        <div class="row">
                                        <div class="col-md-2 side">
                                            <ul>
                                            <% data.result && data.result.apiList.forEach(function(item, index){ %>
                                            <li data-index="<%= index %>" class="<%= index == 0 ? 'active' : '' %>"><%= item.apiCName %></li>
                                            <% }) %>
                                            </ul>
                                        </div>
                                        <div class="col-md-10 content api markdown-body">
                                            <% data.result && data.result.apiList.forEach(function(item, index){ %>
                                            <div class="rightCons<%= index == 0 ? '' : ' hide' %>">
                                                <p>接口地址：<span><%= item.encodeUri %></span></p>
                                                <p>支持格式：<span><%= item.requestType %></span></p>
                                                <p>请求方式：<span><%= item.requestMethod %></span></p>
                                                <p>参数和示例：<span><%= item.testPacket %></span></p>
                                                <p>备注信息：</p>
                                                <div class="markdown-body">
                                                    <%= item.directions %>
                                                </div>
                                            </div>
                                            <% }) %>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="profile">
                                    <div class="container-fluid">
                                        <div class="col-md-8 col-md-offset-1 content markdown-body">
                                            <%= data.result.rtnCode %>
                                        </div>
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="messages1">
                                    <div class="container-fluid">
                                        <div class="col-md-12 content">
                                            <table class="table table-bordered table-condensed">
                                                <caption>常规套餐包：【更多次数、更多优惠，请与商务联系】</caption>
                                                <tbody><tr>
                                                    <th>名称</th>
                                                    <th>价格</th>
                                                    <th>次数/月数</th>
                                                    <th>说明</th>
                                                </tr>
                                                <% data && data.result && data.result.chargeRuleList.forEach(function(item){ %>
                                                    <tr>
                                                        <td><%= item.name %></td>
                                                        <td><%= item.price %></td>
                                                        <td><%= item.chargeCount %></td>
                                                        <td><%= item.description %></td>
                                                    </tr>
                                                <% }) %>
                                            </tbody></table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 热门API -->
            <div class="col-md-3 fade" id="selectedAPI">
                
            </div>
            </div>
        </div>
    </div>
</div>